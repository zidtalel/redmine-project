<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>
      Guide ‚Äî √âcrire des sc√©narios Gherkin efficaces ‚Äî Redmine Exemples
    </title>
    <!-- Script de protection d'acc√®s - V√©rification de l'authentification -->
    <script src="js/auth-guard.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    />
    <style>
      :root {
        --bg: #f4f7fa;
        --card: #fff;
        --muted: #6b7280;
        --accent: #216ba5;
        --accent-2: #1d77b8;
        --radius: 12px;
        --maxw: 1100px;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
        margin: 0;
        font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system,
          "Helvetica Neue", Arial;
      }
      body {
        background: linear-gradient(180deg, #f7fbff 0%, var(--bg) 100%);
        color: #222;
        padding: 28px;
        display: flex;
        justify-content: center;
      }
      .wrap {
        width: 100%;
        max-width: var(--maxw);
      }
      header {
        background: linear-gradient(
          90deg,
          rgba(33, 107, 165, 0.12),
          rgba(29, 119, 184, 0.06)
        );
        padding: 20px 24px;
        border-radius: calc(var(--radius) + 4px);
        margin-bottom: 18px;
        display: flex;
        gap: 18px;
        align-items: center;
        border: 1px solid rgba(13, 66, 104, 0.06);
      }
      .logo {
        width: 64px;
        height: 64px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 20px;
        box-shadow: 0 6px 18px rgba(33, 107, 165, 0.12);
      }
      h1 {
        margin: 0;
        font-size: 20px;
        color: #083b5a;
      }
      p.lead {
        margin: 2px 0 0 0;
        color: var(--muted);
        font-size: 13px;
      }
      .grid {
        display: grid;
        /* Deux colonnes : principal (2/3) et sidebar (1/3) */
        grid-template-columns: 2fr 1fr;
        gap: 20px;
        align-items: start;
      }
      .card {
        background: var(--card);
        padding: 22px;
        border-radius: var(--radius);
        box-shadow: 0 6px 20px rgba(20, 30, 40, 0.04);
        border: 1px solid rgba(16, 24, 32, 0.03);
      }
      main.card {
        padding: 26px;
      }
      aside.card {
        position: sticky; /* Pour garder l'aside visible en haut */
        top: 20px;
        padding: 22px;
        height: fit-content;
      }
      h2 {
        color: #0f3e5f;
        margin-top: 0;
        font-size: 18px; /* L√©g√®rement plus grand pour la lisibilit√© */
        border-bottom: 2px solid #e6edf4;
        padding-bottom: 5px;
        margin-bottom: 15px;
      }
      h3 {
        color: #123d57;
        margin-bottom: 8px;
        margin-top: 20px;
        font-size: 16px;
      }
      p,
      li {
        color: #233242;
        line-height: 1.6;
        font-size: 15px;
      }
      .muted {
        color: var(--muted);
        font-size: 13px;
      }
      ul,
      ol {
        margin-left: 18px;
        padding-left: 0;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 15px;
        margin-bottom: 15px;
        font-size: 14px;
      }
      th,
      td {
        padding: 10px;
        border: 1px solid #e6edf4;
        text-align: left;
        vertical-align: top;
      }
      th {
        background: #f2f7fb;
        color: #123d57;
        font-weight: 600;
      }
      pre {
        background: #f6fbff;
        padding: 15px;
        border-left: 4px solid var(--accent);
        border-radius: 8px;
        overflow: auto;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono",
          monospace;
        font-size: 13px;
        color: #0b3b57;
        line-height: 1.5;
        margin-top: 15px;
        margin-bottom: 20px;
      }
      .tip-box {
        background: #e6f7ff;
        border: 1px solid #b3e0ff;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
      }
      .tip-box h4 {
        color: var(--accent);
        margin: 0 0 5px 0;
        font-size: 15px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .tip-box p {
        margin: 0;
        font-size: 14px;
      }
      .list-unstyled {
        list-style: none;
        padding-left: 0;
      }
      .list-unstyled li {
        margin-bottom: 8px;
      }

      footer {
        margin-top: 25px;
        text-align: center;
        color: var(--muted);
        font-size: 13px;
      }
      @media (max-width: 1000px) {
        .grid {
          grid-template-columns: 1fr 320px;
        }
      }
      @media (max-width: 860px) {
        .grid {
          grid-template-columns: 1fr;
        }
        aside.card {
          order: 2;
          position: static; /* Retire sticky sur mobile */
        }
      }
      /* Lien Accueil (copi√© du style commun des pages features) */
      .home-link {
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 1000;
        font-size: 0.95em;
        font-weight: 600;
        text-decoration: none;
        color: #495057;
        padding: 8px 15px;
        border-radius: 20px;
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease-in-out;
      }
      .home-link:hover {
        background-color: #e9ecef;
        color: #007bff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        transform: translateY(-1px);
      }
      @media screen and (max-width: 768px) {
        .home-link {
          font-size: 0.85em;
          padding: 5px 10px;
          top: 10px;
          left: 10px;
        }
      }
    </style>
  </head>
  <body>
    <a href="../main/menu.html" class="home-link" title="Retour √† la page d'accueil"
      >üè† Accueil</a
    >
    <div class="wrap" role="main" aria-labelledby="title">
      <header>
        <div class="logo" aria-hidden="true">GK</div>
        <div>
          <h1 id="title">Guide ‚Äî √âcrire des sc√©narios Gherkin efficaces</h1>
          <p class="lead">
            R√®gles et meilleures pratiques pour le Behavior-Driven Development
            (BDD) avec des exemples bas√©s sur Redmine.
          </p>
        </div>
      </header>

      <div class="grid">
        <main class="card" aria-label="Contenu du guide Gherkin">
          <h2>Introduction au Langage Gherkin</h2>
          <p>
            Gherkin est un langage orient√© m√©tier qui permet de d√©crire le
            comportement des syst√®mes de mani√®re claire, structur√©e et non
            ambigu√´. Il sert de <strong>documentation vivante</strong> et de
            base pour l'automatisation des tests (BDD).
          </p>

          <h3>1. Structure de Base : Feature et Scenario</h3>
          <p>
            Chaque fichier Gherkin (.feature) commence par une
            <strong><code>Feature:</code></strong> (Fonctionnalit√©) qui donne le
            titre du composant test√©. Il est suivi d'un ou plusieurs
            <strong><code>Scenario:</code></strong> (Sc√©nario) d√©crivant un cas
            d'utilisation sp√©cifique.
          </p>

          <h2>2. Les Mots-Cl√©s Fondamentaux (AAA)</h2>
          <p>
            Les √©tapes d'un sc√©nario suivent le principe
            <strong>AAA</strong> (Arrange, Act, Assert).
          </p>

          <table>
            <thead>
              <tr>
                <th>Mot-Cl√©</th>
                <th>Phase AAA</th>
                <th>R√¥le</th>
                <th>Exemple Redmine</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Given</strong></td>
                <td>Arrange (Pr√©parer)</td>
                <td>
                  D√©finit le <strong>contexte initial</strong> du syst√®me ou les
                  pr√©conditions n√©cessaires.
                </td>
                <td><code>Given</code> l'utilisateur "Manager" est connect√©</td>
              </tr>
              <tr>
                <td><strong>When</strong></td>
                <td>Act (Agir)</td>
                <td>
                  D√©crit l'<strong>action</strong> sp√©cifique entreprise par
                  l'utilisateur ou le syst√®me.
                </td>
                <td>
                  <code>When</code> il cr√©e un nouveau ticket avec le sujet
                  "Probl√®me"
                </td>
              </tr>
              <tr>
                <td><strong>Then</strong></td>
                <td>Assert (Affirmer/V√©rifier)</td>
                <td>
                  D√©crit le <strong>r√©sultat</strong> attendu et v√©rifiable
                  apr√®s l'action.
                </td>
                <td>
                  <code>Then</code> le ticket doit √™tre cr√©√© avec le statut
                  "Nouveau"
                </td>
              </tr>
            </tbody>
          </table>

          <h3>Exemple Complet (Cr√©ation de ticket dans Redmine) :</h3>
          <pre>
Feature: Cr√©ation de tickets standard
  Scenario: Cr√©ation d'un nouveau ticket
    Given l'utilisateur "Testeur" est connect√© √† Redmine
    When il cr√©e un nouveau ticket avec le sujet "V√©rifier le lien de la page d'accueil"
    And le statut est d√©fini sur "Nouveau"
    Then un message de confirmation "Cr√©ation r√©ussie" doit √™tre affich√©
    And le ticket doit √™tre visible dans la liste des tickets actifs
</pre
          >

          <h2>3. Les Mots-Cl√©s Secondaires et Avanc√©s</h2>

          <h3>And (Et), But (Mais)</h3>
          <p>
            Ces mots-cl√©s sont utilis√©s pour am√©liorer la fluidit√© et
            l'encha√Ænement des √©tapes de la
            <strong>m√™me cat√©gorie</strong> (plusieurs <code>Given</code>,
            <code>When</code>, ou <code>Then</code>).
          </p>
          <pre>
  Given l'utilisateur est connect√©
  <strong>And</strong> il est membre du projet "1292"
  When il soumet le formulaire
  <strong>And</strong> il clique sur "Ajouter"
  Then la page de profil est affich√©e
  <strong>But</strong> le mot de passe n'est pas r√©v√©l√©
</pre
          >

          <h3>Background (Contexte)</h3>
          <p>
            D√©finit une ou plusieurs √©tapes <code>Given</code> qui sont
            ex√©cut√©es <strong>avant chaque <code>Scenario</code></strong> du
            Feature File. Il est utilis√© pour √©viter la r√©p√©tition de
            pr√©conditions communes (connexion, initialisation).
          </p>
          <pre>
Feature: Gestion des acc√®s au projet

  Background: Pr√©paration de l'environnement
    Given l'utilisateur "Admin" est connect√©
    And le projet "Syst√®me de Paie" existe

  Scenario: Un non-membre ne peut pas voir le projet
    ...
  Scenario: Un membre peut consulter la page des activit√©s
    ...
</pre
          >

          <h3>Scenario Outline (Plan de Sc√©nario) & Examples (Exemples)</h3>
          <p>
            Permet d'ex√©cuter le m√™me sc√©nario plusieurs fois avec des jeux de
            donn√©es vari√©s. Les variables dans le sc√©nario sont encadr√©es par
            <code>&lt; &gt;</code> et sont remplies par les valeurs du tableau
            <strong>Examples</strong>.
          </p>
          <pre>
Scenario Outline: Afficher les tickets selon leur statut
  Given je suis sur la page de la liste des tickets
  When je filtre par le statut "&lt;Statut&gt;"
  Then je vois seulement les tickets ayant le statut "&lt;Statut&gt;"
  And le nombre de tickets affich√©s est √©gal √† &lt;Nombre_Attendu&gt;

  Examples:
    | Statut   | Nombre_Attendu |
    | Nouveau  | 15             |
    | Ferm√©    | 32             |
    | En cours | 8              |
</pre
          >
        </main>

        <aside class="card" aria-label="R√®gles et bonnes pratiques">
          <h2>R√®gles d'Or pour l'√©criture Gherkin</h2>
          <ul class="list-unstyled" style="font-size: 14px; line-height: 1.6">
            <li>
              <i class="fas fa-check-circle" style="color: green"></i>
              <strong>Une Seule Action</strong> (<code>When</code>) par
              sc√©nario.
            </li>
            <li>
              <i class="fas fa-check-circle" style="color: green"></i>
              <strong>Focus M√©tier</strong> : Utilisez le langage de
              l'utilisateur final. √âvitez le jargon technique.
            </li>
            <li>
              <i class="fas fa-check-circle" style="color: green"></i>
              <strong>Sc√©narios Ind√©pendants</strong> : L'ordre d'ex√©cution ne
              devrait pas importer.
            </li>
            <li>
              <i class="fas fa-check-circle" style="color: green"></i>
              <strong>Nommage Clair</strong> : Le titre du sc√©nario doit d√©crire
              l'intention (ex : <em>Cr√©ation de ticket en statut Ferm√©</em>).
            </li>
            <li>
              <i class="fas fa-check-circle" style="color: green"></i>
              <strong>√âl√©ments R√©utilisables</strong> : Cr√©ez des √©tapes qui
              peuvent √™tre utilis√©es dans plusieurs sc√©narios.
            </li>
            <li>
              <i class="fas fa-check-circle" style="color: green"></i>
              <strong>Loi de l'Unit√©</strong> : Une √©tape Gherkin ne doit faire
              qu'une seule chose (ex : ne pas cr√©er l'utilisateur <em>et</em> le
              connecter dans la m√™me ligne).
            </li>
          </ul>

          <hr
            style="border: none; border-top: 1px solid #eef6fb; margin: 20px 0"
          />

          <div class="tip-box">
            <h4><i class="fas fa-lightbulb"></i> Astuce Redmine/BDD</h4>
            <p>
              Pour les tests d'API, vos √©tapes <code>When</code> pourraient
              ressembler √† "When l'utilisateur envoie une requ√™te GET √†
              /api/issues/&lt;ticket_id&gt;", et vos <code>Then</code>
              v√©rifieront le statut HTTP et les champs JSON de la r√©ponse.
            </p>
          </div>
            <div class="card" aria-label="Podcast Gherkin" style="background:#fff8e1; border:1px solid #ffe082; margin-top:28px;">
              <h3 style="margin-top:0; color:#333; display:flex; align-items:center; gap:8px;"><i class="fas fa-podcast" aria-hidden="true"></i> Podcast Audio : Gherkin</h3>
              <p style="font-size:0.95em; color:#555; margin-bottom:14px;">Mini-guide audio (FR/EN) sur l'√©criture de sc√©narios Gherkin efficaces et les pi√®ges √† √©viter.</p>
              <div class="lang-block" style="margin-bottom:12px;">
                <label for="audio-fr" style="font-weight:600; color:#123d57; display:block; margin-bottom:4px;"><i class="fas fa-headset" style="color:#216ba5"></i> üá´üá∑ Fran√ßais</label>
                <audio id="audio-fr" controls>
                  <source src="../../ressources/podcast_gherkin_fr.mp3" type="audio/mp3" />
                  Podcast √† venir.
                </audio>
              </div>
              <div class="lang-block">
                <label for="audio-en" style="font-weight:600; color:#123d57; display:block; margin-bottom:4px;"><i class="fas fa-headset" style="color:#216ba5"></i> üá¨üáß English</label>
                <audio id="audio-en" controls>
                  <source src="../../ressources/podcast_gherkin_en.mp3" type="audio/mp3" />
                  Podcast coming soon.
                </audio>
              </div>
              <div style="background:#fff; border:1px solid #f1e4b5; padding:8px 10px; border-radius:8px; font-size:0.75em; color:#6c5438; margin-top:10px;">Astuce : Respectez la structure <code>Given / When / Then</code> et gardez chaque √©tape simple et testable.</div>
            </div>
      </div>

      <footer>
        <p>
          &copy; Talel Zid | Version 1.0 ‚Äî Octobre 2025 | Guide Gherkin |<br />Usage
          personnel ou √©ducatif.
        </p>
      </footer>
    </div>
  </body>
</html>
